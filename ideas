# Creates CA (priv key, cert, and openssl CA config)
# (OU=),O=
rex organization create $OrgDN ($BaseOrgDN)

# Creates a user cert
# UID=,O=
rex user create-csr $OrgDN $UserDN

rex user create-cert $UserCSR

# Downloads dependencies, runs the build commands, and dumps the image, 
#
# Images are a tar file consisting of:
# * rex file (/Rexfile)
# * cert and chain (/cert.pem)
# * image (/image)
# * metadata (/META) (contains name, date)
rex image build $rex_file $name

# Generates a CSR for the image
rex image csr $ImageDN

# Creates a signed image
rex image sign $ImageCSR

# Downloads and verifies signature of an image
rex image fetch $url

# Creates a network for the current user's organization
# Perhaps generates IPSec key as well and used for all LAN?
rex network build $NetworkDN

rex network gateway add $NetworkDN $GatewayIP

# Starts a jail on a network
rex jail run $ImageDN $NetworkDN


rex util ip $OrgDN $NetworkDN $ImageDN
